apiVersion: rancher.rancher2.m.contrib.crossplane.io/v1alpha1
kind: NodePool
metadata:
  annotations:
    meta.upbound.io/example-id: rancher/v1alpha1/nodepool
  labels:
    testing.upbound.io/example-name: foo
  name: foo
  namespace: crossplane-system
spec:
  forProvider:
    clusterIdSelector:
      matchLabels:
        testing.upbound.io/example-name: foo-custom
    controlPlane: true
    etcd: true
    hostnamePrefix: foo-cluster-0
    name: foo
    nodeTemplateId: ${rancher2_node_template.foo.id}
    quantity: 1
    worker: true

---

apiVersion: rancher.rancher2.m.contrib.crossplane.io/v1alpha1
kind: CloudCredential
metadata:
  annotations:
    meta.upbound.io/example-id: rancher/v1alpha1/nodepool
  labels:
    testing.upbound.io/example-name: foo
  name: foo
  namespace: crossplane-system
spec:
  forProvider:
    amazonec2CredentialConfig:
    - accessKeySecretRef:
        key: example-key
        name: example-secret
      secretKeySecretRef:
        key: example-key
        name: example-secret
    description: Terraform cloudCredential acceptance test
    name: foo

---

apiVersion: rancher.rancher2.m.contrib.crossplane.io/v1alpha1
kind: Cluster
metadata:
  annotations:
    meta.upbound.io/example-id: rancher/v1alpha1/nodepool
  labels:
    testing.upbound.io/example-name: foo-custom
  name: foo-custom
  namespace: crossplane-system
spec:
  forProvider:
    description: Foo rancher2 custom cluster
    kind: rke
    name: foo-custom
    rkeConfig:
    - network:
      - plugin: canal
